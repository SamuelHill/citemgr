//
// top-level build only needs to set configurations
//


// version definitions for all dependencies
apply from: "${project.rootDir}/confs/versions.gradle"

// settings for publication to nexus: allow dynamic override
if (hasProperty('pub')) {
    System.err.print "Using publication configuration from ${pub}"
    File confFile = new File(pub)
    if (! confFile.exists()) {
        throw new Exception("No configuration file ${pub} found.")
    }
    apply from: pub

} else {
    File confFile = new File("pubconf.gradle")
    if (! confFile.exists()) {
        throw new Exception("No configuration file 'pubconf.gradle' found.")
    }
    println "Using default publication configuration in 'pubconf.gradle'"
    apply from: "pubconf.gradle"
}


// settings for core: build:  allow dynamic override
if (hasProperty('conf')) {
    System.err.print "Using configuration data from ${conf}"
    File confFile = new File(conf)
    if (! confFile.exists()) {
        throw new Exception("No configuration file ${conf} found.")
    }
    apply from: conf

} else {
    File confFile = new File("${project.rootDir}/confs/coreconf.gradle")
    if (! confFile.exists()) {
        throw new Exception("No configuration file ${confFile} found.")
    }
    println "Using default configuration in 'coreconf.gradle'"
    apply from: "${project.rootDir}/coreconf.gradle"
}


subprojects {
  group = "org.homermultitext"
  version = '0.5.20'	
  tasks.withType(Jar) {
    archivesBaseName = "citemgr"
  }
}